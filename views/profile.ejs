<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="flex flex-col">
        <!-- top side -->
        <nav class="flex items-center justify-between backdrop-blur-sm p-7 text-md fixed w-full z-10 ">
                <a href="/dashboard"><h1 class="font-bold">Vault</h1></a>
                <div class="flex gap-5">
                        <a href="/dashboard">Home</a>
                        <a href="#">Search</a>
                        <a href="#">feed</a>
                        <a href="#">favourites</a>
                </div>
                <div>
                    <h1>Account settings</h1>
                </div>
        </nav>
        <!-- all the bottom part -->
        <div class="flex w-full mt-16 justify-center">
            <%- include('./components/followingList') %>
            <!-- left -->
            <div class="w-[18%]  h-screen fixed left-1 top-10 ">
                <!-- profile -->
                <div class="flex flex-col items-center p-7">
                    <div class="flex flex-col items-center p-5">
                        <div class="w-20 h-20 bg-sky-300 rounded-full border-2"><img src="" alt=""></div>
                        <h1 class="text-center text-lg font-semibold mt-3"><%= user.username %></h1>
                    </div>
                    <div class="flex gap-10 ">
                        <div class="flex flex-col items-center">
                            <h3 class="font-bold"><%= user.myPosts.length %></h3>
                            <a href="" class="text-gray-600">Posts</a>
                        </div>
                        <div class="flex flex-col items-center">
                            <h3 class="font-bold"><%= user.followers.length %></h3>
                            <a href="" class="text-gray-600">Followers</a>
                        </div>
                        <div class="flex flex-col items-center">
                            <h3 class="font-bold"><%= user.following.length %></h3>
                            <a href="" id="followingShow" class="text-gray-600">Following</a>
                        </div>
                    </div>
                </div>
                <hr class="mt-5">
                 <!-- about -->
                <div class="flex flex-col items-start gap-5 p-14 justify-center">
                    <div class=" font-semibold">Name</div>
                    <div>Lorem ipsum dolor sim maxime iure minus tempora neque, vitae veniam similique culpa laborum quas? Pariatur animi sapiente esse sit facere!</div>
                    <div class="text-sky-500">linkflsdjflksjdflksjs</div>
                </div>
                <!-- stories -->
                <div class=" w-full h-fit flex items-center justify-start overflow-hidden flex-wrap gap-8 p-8 sticky">
                    <div class="flex flex-col items-center">
                        <div class="w-16 h-16 rounded-full overflow-hidden border-2">
                            <img src="https://plus.unsplash.com/premium_photo-1682125196952-a37ba95ee650?q=80&w=2080&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="" class="w-full h-full object-cover">
                        </div>
                        <h1 class="font-semibold text-sm mt-1">Waterpark</h1>
                    </div>
                </div>

            </div>
            <!-- mid -->
                        <!-- Display user-specific posts -->
            <div class="ml-[6%] w-[72%] h-screen flex flex-wrap gap-8 py-20 px-10 items-start justify-start overflow-auto">
                <% if (userPosts.length > 0) { %>
                    <% userPosts.forEach(post => { %>
                        <div class="h-96 w-96 shadow-sm transition hover:scale-[101%] overflow-hidden">
                            <!-- Render the image if it exists -->
                            <% if (post.img && post.img.data) { %>
                                <img class="w-full h-full object-cover" src="data:<%= post.img.contentType %>;base64,<%= post.img.data.toString('base64') %>" alt="Post image">
                            <% } else { %>
                                <p>No image available for this post.</p>
                            <% } %>
                        </div>
                    <% }) %>
                <% } else { %>
                    <p>No posts available for this user.</p>
                <% } %>
            </div>
    
            <%- include('./components/postPopup.ejs') %>

            <!-- right -->
            <div class="realtive flex flex-col items-end mx-auto justify-center gap-6 cursor-pointer fixed right-14 top-80 ">
                <h1>3x3</h1>
                <h1>2x2</h1>
                <h1>posts</h1>
                <h1>wrotes</h1>
                <h1>tags</h1>
                <div class="absolute translate-y-96 mx-auto">
                    <button class="border-2 rounded-lg px-3" id="createPostBtn">Create Post</button>
                </div>
            </div>
        </div>
    </div>

</body>
<script src="/JS/showFollowingList.js"></script>
<script src="/JS/postPopus.js"></script>
</html>
